<p #one>one</p>


<mat-card class="mat-elevation-z4 margin-bottom">
    <mat-card-header>
        <div mat-card-avatar class="example-header-image">
            <mat-icon>add</mat-icon>
        </div>
        <mat-card-title>Create Invoice</mat-card-title>
    </mat-card-header>
    <mat-card-content>
        <form [formGroup]="createInvoice">
            <section fxLayout="row wrap" fxLayout.lt-lg="column">
                <mat-form-field class="margin-right-1x" fxFlex="20">
                    <mat-label>Invoice Name</mat-label>
                    <input type="text" #name matInput formControlName="name" placeholder="Name" id="name" required>
                </mat-form-field>
                <!-- <mat-form-field class="margin-right-1x" fxFlex="20">
                    <mat-label>Invoice No.</mat-label>
                    <input type="number" #invoice_no matInput formControlName="invoice_no" placeholder="Invoice Number"
                        id="invoice_no" required>
                </mat-form-field> -->
                <!-- <mat-form-field class="margin-right-1x" fxFlex="20">
                    <mat-label>Invoice Date</mat-label>
                    <input  type="number" #invoice_date matInput oninput="this.value=this.value.slice(0,this.maxLength)"
                    maxlength="3" formControlName="invoice_date" placeholder="invoice_date" id="invoice_date" required>
                </mat-form-field> -->

                <mat-form-field class="margin-right-1x" fxFlex="20">
                    <mat-label>Project Name</mat-label>
                    <input type="text" #project_name matInput formControlName="project_name" placeholder="Project Name"
                        id="project_name" required>
                </mat-form-field>
            </section>
            <section fxLayout="row wrap" fxLayout.lt-lg="column" style="margin-top:25px;">
            </section>
            <section fxLayout="row wrap" fxLayout.lt-lg="column">
                <mat-form-field class="margin-right-1x" fxFlex="20">
                    <mat-label>Client Email</mat-label>
                    <input type="text" #client_email matInput formControlName="client_email" placeholder="Client Email"
                        id="client_email" required>
                </mat-form-field>

                <mat-form-field class="margin-right-1x" fxFlex="20">
                    <mat-label>Client First Name</mat-label>
                    <input type="text" #client_first_name matInput formControlName="client_first_name"
                        placeholder="Client First Name" id="client_first_name" required>
                </mat-form-field>

                <mat-form-field class="margin-right-1x" fxFlex="20">
                    <mat-label>Last Name</mat-label>
                    <input type="text" #client_last_name matInput formControlName="client_last_name"
                        placeholder="Client Last Name" id="client_last_name" required>
                </mat-form-field>
            </section>
            <section fxLayout="row wrap" fxLayout.lt-lg="column" style="margin-top:25px;">
            </section>
            <!-- <section fxLayout="row wrap" fxLayout.lt-lg="column">
                <mat-form-field class="margin-right-1x" fxFlex="20">
                    <mat-label>Creator Email</mat-label>
                    <input  type="number" #creator_email matInput oninput="this.value=this.value.slice(0,this.maxLength)"
                    maxlength="4" formControlName="creator_email" placeholder="creator_email" id="creator_email" required>
                </mat-form-field>

                <mat-form-field class="margin-right-1x" fxFlex="20">
                    <mat-label>Company Name</mat-label>
                    <input  type="number" #company_name matInput oninput="this.value=this.value.slice(0,this.maxLength)"
                    maxlength="4" formControlName="company_name" placeholder="company_name" id="company_name" required>
                </mat-form-field>

                <mat-form-field class="margin-right-1x" fxFlex="20">
                    <mat-label>Company Street</mat-label>
                    <input  type="number" #company_street matInput oninput="this.value=this.value.slice(0,this.maxLength)"
                    maxlength="4" formControlName="company_street" placeholder="company_street" id="company_street" required>
                </mat-form-field>

                <mat-form-field class="margin-right-1x" fxFlex="20">
                    <mat-label>Company Img</mat-label>
                    <input  type="number" #company_street matInput oninput="this.value=this.value.slice(0,this.maxLength)"
                    maxlength="4" formControlName="company_img" placeholder="company_img" id="company_img" required>
                </mat-form-field>

                <mat-form-field class="margin-right-1x" fxFlex="20">
                    <mat-label>Company Zip</mat-label>
                    <input  type="number" #company_street matInput oninput="this.value=this.value.slice(0,this.maxLength)"
                    maxlength="4" formControlName="company_zip" placeholder="company_zip" id="company_zip" required>
                </mat-form-field>

                <mat-form-field class="margin-right-1x" fxFlex="20">
                    <mat-label>Company Country</mat-label>
                    <input  type="number" #company_street matInput oninput="this.value=this.value.slice(0,this.maxLength)"
                    maxlength="4" formControlName="company_country" placeholder="company_country" id="company_country" required>
                </mat-form-field>

                <mat-form-field class="margin-right-1x" fxFlex="20">
                    <mat-label>Company City</mat-label>
                    <input  type="number" #company_street matInput oninput="this.value=this.value.slice(0,this.maxLength)"
                    maxlength="4" formControlName="company_city" placeholder="company_city" id="company_city" required>
                </mat-form-field>

                <mat-form-field class="margin-right-1x" fxFlex="20">
                    <mat-label>Company State</mat-label>
                    <input  type="number" #company_street matInput oninput="this.value=this.value.slice(0,this.maxLength)"
                    maxlength="4" formControlName="company_state" placeholder="company_state" id="company_state" required>
                </mat-form-field>
                </section> -->

            <section fxLayout="row wrap" fxLayout.lt-lg="column">
                <section fxLayout="row wrap" fxLayout.lt-lg="column" style="margin-top:25px;">
                </section>
                <mat-form-field class="margin-right-1x" fxFlex="20">
                    <mat-label>Total Cost</mat-label>
                    <input type="text" #total_cost matInput [value]="totalCost" placeholder="Total Cost" id="total_cost"
                        required readonly>
                    <!-- <mat-hint>{{total_cost.value?.length || 0}}/3</mat-hint>
                <mat-error>
                    Please enter a positive 1-3 digit number
                </mat-error> -->
                </mat-form-field>
            </section>

            <!-- <section fxLayout="row wrap" fxLayout.lt-lg="column" style="margin-top:25px;">
            </section> -->
            <section fxLayout="row" fxLayout.lt-lg="column" class="margin-bottom-2x"
                *ngIf="dataSourceLineItem.data.length > 0">
                <div>
                    <table mat-table [dataSource]="dataSourceLineItem" #ingredientTableSort="matSort" matSort>
                        <ng-container matColumnDef="select">
                            <th mat-header-cell *matHeaderCellDef>
                                <mat-checkbox (change)="$event ? masterToggle() : null"
                                    [checked]="selection.hasValue() && isAllSelected()"
                                    [indeterminate]="selection.hasValue() && !isAllSelected()"
                                    [aria-label]="checkboxLabel()">
                                </mat-checkbox>
                            </th>
                            <td mat-cell *matCellDef="let row">
                                <mat-checkbox (click)="$event.stopPropagation()"
                                    (change)="$event ? selection.toggle(row) : null"
                                    [checked]="selection.isSelected(row)" [aria-label]="checkboxLabel(row)">
                                </mat-checkbox>
                            </td>
                        </ng-container>

                        <ng-container matColumnDef="name">
                            <th mat-header-cell *matHeaderCellDef> Name </th>
                            <td mat-cell *matCellDef="let element"> {{element.get("name").value}} </td>
                        </ng-container>
                        <ng-container matColumnDef="rate_type">
                            <th mat-header-cell *matHeaderCellDef> Rate Type </th>
                            <td mat-cell *matCellDef="let element">{{element.get("rate_type").value}}</td>
                        </ng-container>
                        <ng-container matColumnDef="rate">
                            <th mat-header-cell *matHeaderCellDef> Rate </th>
                            <td mat-cell *matCellDef="let element"> {{element.get("rate").value | currency:'USD'}} </td>
                        </ng-container>
                        <ng-container matColumnDef="hours">
                            <th mat-header-cell *matHeaderCellDef> Hours </th>
                            <td mat-cell *matCellDef="let element"> {{element.get("hours").value}} </td>
                        </ng-container>
                        <ng-container matColumnDef="cost">
                            <th mat-header-cell *matHeaderCellDef> Total Cost </th>
                            <td mat-cell *matCellDef="let element"> {{element.get("cost").value | currency:'USD'}} </td>
                        </ng-container>

                        <ng-container matColumnDef="action">
                            <th mat-header-cell *matHeaderCellDef> </th>
                            <td mat-cell *matCellDef="let element">
                                <button mat-icon-button [matMenuTriggerFor]="Ingredientsmenu" aria-label="user options">
                                    <mat-icon>more_horiz</mat-icon>
                                </button>
                                <mat-menu #Ingredientsmenu="matMenu">
                                    <button mat-menu-item aria-label="button with edit icon"
                                        (click)="editLineItem(element)">
                                        <mat-icon>edit</mat-icon>
                                        <span>Edit</span>
                                    </button>
                                </mat-menu>
                            </td>
                        </ng-container> -->

                        <ng-container matColumnDef="recipeType">
                            <th mat-header-cell *matHeaderCellDef> </th>
                            <td mat-cell *matCellDef="let element"> {{element.recipeType}} </td>
                        </ng-container> -->

                        <tr mat-header-row *matHeaderRowDef="lineItemColumns"></tr>
                        <tr mat-row *matRowDef="let row; columns: lineItemColumns;"></tr>
                    </table>
                    <!-- <div *ngIf="!proteinMet" style="width:50%" class="alert alert-warning custom-alert-portion" role="alert" data-mdb-color="warning">
                    This recipe's <b>protein</b> goal is <b>{{totalProteinGoal}}</b> but is currently only <b>{{totalProtein}}</b>
                    </div>
                    <div *ngIf="!fiberMet" style="width:50%" class="alert alert-warning custom-alert-portion" role="alert" data-mdb-color="warning">
                        This recipe's <b>fiber</b> goal is <b>{{totalFiberGoal}}</b> but is currently only <b>{{totalFiber}}</b>
                    </div>  
                    <div *ngIf="!glycemicMet" style="width:50%" class="alert alert-warning custom-alert-glycemic" role="alert" data-mdb-color="warning">
                        This recipe's <b>glycemic portion</b> goal is <b>unbalanced</b>, total carbohydrates/2 <b>{{totalCD2}}</b> is higher than the protein + fiber <b>{{totalPandF}}</b>
                    </div>  
                </div> -->
                </div>
            </section>
        </form>


        <div class="button-box" fxLayout="row" fxLayout.lt-lg="column">
            <div fxFlex="50" fxLayoutAlign="start">
                <button (click)="createLineItem()" class="margin-top-1x margin-right-1x" mat-raised-button
                    color="accent">
                    Add New Line Item</button>

                <button (click)="removeSelected()" *ngIf="selection.hasValue()" [disabled]="selection.isEmpty()"
                    class="margin-top-1x" mat-raised-button color="warn">
                    Remove Selected</button>
            </div>
            <div fxFlex="50" fxLayoutAlign="end">
                <button (click)="createNewInvoice()" class="margin-top-1x margin-right-1x" mat-raised-button
                    color="accent">
                    Create</button>
                <button (click)="cancelCreateInvoice()" class="margin-top-1x margin-right-1x" mat-raised-button
                    color="warn">
                    Cancel</button>
            </div>
        </div>

    </mat-card-content>
</mat-card>

<app-invoice-report [reportData]="reportData"></app-invoice-report>